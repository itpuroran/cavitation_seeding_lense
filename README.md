## Для создания полости в форме линзы (см. Рис.).
![](fig.jpg)

### Установка и запуск
1. Скопировать все файлы командой
```
git clone https://github.com/itpuroran/cavitation_seeding_lense.git
```
2. В директорию create поместить папку dumpL, где лежат dump файлы метастабильной системы с именами dump_start_0.txt, dump_start_1.txt и т.д., момент времени ITEM: TIMESTEP в них должен быть 0. Количество файлов должно быть не меньше, чем число копий систем при каждом заданном значении h и R.

Пример "шапки" dump файла
```
ITEM: TIMESTEP
0
ITEM: NUMBER OF ATOMS
108000
ITEM: BOX BOUNDS pp pp pp
-9.2737654475012719e-03 5.1324818800015073e+01
-9.2737654475012719e-03 5.1324818800015073e+01
-9.2737654475012719e-03 5.1324818800015073e+01
ITEM: ATOMS id x y z vx vy vz
```

3.  В файле create_cavity.txt указать следующие параметры:
* T0 - температура жидкости
* r_0 - радиус малой полости, которая вырезается для размещения отталкивающих частиц
* epsilon_2  - параметр epsilon для второго типа частиц
* sigma_2 - начальный параметр sigma для центральной частицы второго типа 
* sigma_2_max - максимальный параметр sigma для центральной частицы второго типа 
* check_n_step - через сколько шагов проверять число частиц внутри полости
* increase_sigma_step - через сколько шагов менять параметр sigma
* N - число частиц жидкости

4. В файле rewrite_create_cavity.py задать параметры:

* минимальное значение, максимальное значение, шаг изменения полувысоты линзы
```
h_start, h_stop, delta_h = 2, 2, 1
```
* минимальное значение, максимальное значение, шаг изменения радиуса сфер, образующих линзу
```
R_start, R_stop, delta_R = 3, 3, 1
```
* n_copy - число копий систем при каждом заданном значении h и R
* n - количество отталкивающих сфер с одной стороны от центральной сферы (см. Рис.)
* n_diag - количество диагоналей в одной четверти
* input_file - шаблон входного файла (create_cavity.txt) 

5. Выполнить команду
```
python rewrite_create_cavity.py
```
Если программа завершится успешно, должны появиться папки create_cavity_files, dumps_twophase. В первой содержатся входные файлы для моделироваия, во вторую будут записываться результирующие dump файлы.

6. В скрипте start указать параметры:
* n_h - количество полувысот линзы
* n_rad - количество радиусов
* n_copy - число копий системы при каждом значении радиуса и высоты

7. Изменить режим доступа файла start и запустить его
```
./start
```

8. После завершения всех расчетов перенести папку dumps_twophase в директорию calc.

